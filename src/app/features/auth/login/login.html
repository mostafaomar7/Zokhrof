<div class="login-page">
  <div class="content">
      <img src="image 1.png" alt="">

    <div class="brand">الزخرف</div>

    <div class="card">
      <h1 class="title">تسجيل الدخول</h1>
      <p class="subtitle">إلى لوحة تحكم الزخرف</p>

      <form class="form" autocomplete="off" [formGroup]="form" (ngSubmit)="submit()">

        <!-- رسالة عامة من السيرفر -->
        <div class="error-box" *ngIf="serverMessage">
          {{ serverMessage }}
        </div>

        <label class="field">
          <span class="label">البريد الإلكتروني</span>
          <input class="input" type="email" formControlName="email" />

          <small class="error" *ngIf="email.touched && email.errors?.['required']">
            البريد الإلكتروني مطلوب
          </small>

          <small class="error" *ngIf="email.touched && email.errors?.['email']">
            البريد الإلكتروني غير صحيح
          </small>

          <small class="error" *ngIf="email.touched && email.errors?.['server']">
            {{ email.errors?.['server'] }}
          </small>
        </label>

        <label class="field">
          <span class="label">كلمة المرور</span>

          <div class="password-wrap">
            <input
              class="input"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
            />

            <button
              type="button"
              class="eye"
              (click)="togglePassword()"
              [attr.aria-label]="showPassword ? 'إخفاء كلمة المرور' : 'إظهار كلمة المرور'"
            >
              <!-- عين مفتوحة -->
              <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M2 12s3.5-7 10-7 10 7 10 7-3.5 7-10 7S2 12 2 12Z"
                  stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="12" r="3"
                  stroke="currentColor" stroke-width="2"/>
              </svg>

              <!-- عين مقفولة -->
              <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none">
                <path d="M3 3l18 18" stroke="currentColor" stroke-width="2"/>
                <path d="M10.7 10.7a3 3 0 004.2 4.2"
                  stroke="currentColor" stroke-width="2"/>
                <path d="M2 12s3.5-7 10-7c2.1 0 3.9.6 5.4 1.5M22 12s-3.5 7-10 7c-2.1 0-3.9-.6-5.4-1.5"
                  stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>

          <small class="error" *ngIf="password.touched && password.errors?.['required']">
            كلمة المرور مطلوبة
          </small>

          <small class="error" *ngIf="password.touched && password.errors?.['minlength']">
            كلمة المرور يجب أن تكون 8 أحرف على الأقل
          </small>

          <small class="error" *ngIf="password.touched && password.errors?.['pattern']">
            كلمة المرور يجب أن تحتوي على حرف كبير وصغير ورقم ورمز (مثال: Test@1234)
          </small>

          <small class="error" *ngIf="password.touched && password.errors?.['invalid']">
            كلمة المرور غير صحيحة
          </small>

          <small class="error" *ngIf="password.touched && password.errors?.['server']">
            {{ password.errors?.['server'] }}
          </small>
        </label>

        <button class="btn" type="submit" [disabled]="isLoading">
          {{ isLoading ? 'جاري الدخول...' : 'تسجيل الدخول' }}
        </button>
      </form>
    </div>
  </div>
</div>
