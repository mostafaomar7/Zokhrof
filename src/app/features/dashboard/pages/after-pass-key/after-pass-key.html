<div class="figma-page">
  <section class="phone">
      <!-- <div class="side-dots" aria-hidden="true"></div> -->

    <!-- TOP BAR -->
    <header class="topbar">
      <!-- RIGHT: الصفحة الرئيسية -->
      <div class="top-right">
        <div class="home-link">
          <span class="home-text">الصفحة الرئيسية</span>
          <svg class="ic sm" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M3 10.5 12 3l9 7.5V21a1.5 1.5 0 0 1-1.5 1.5H4.5A1.5 1.5 0 0 1 3 21V10.5Z"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            <path d="M9 22V13h6v9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span class="home-underline"></span>
        </div>
      </div>

      <!-- MID: تتبع المشاريع (بدون خلفية) -->
      <button class="track-link" type="button">
        <svg class="ic sm" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 6h16M4 12h10M4 18h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        تتبع المشاريع
      </button>

      <!-- LEFT: اللغة -->
      <div class="top-left">
        <div class="lang">
          <button class="lang-pill" type="button">EN</button>
          <button class="lang-pill active" type="button">AR</button>
        </div>
      </div>
    </header>
<div class="white-shell">
    <!-- BODY -->
    <main class="body no-scrollbar">
      <div class="main-card">
        <h2 class="main-title">الشؤون الإدارية والفنية</h2>

        <!-- SECTION 1 -->
        <h3 class="section-title">صندوق الوارد</h3>

        <div class="panel">
          <div class="panel-tabs">
            <button class="panel-tab" [class.active]="rightOutboxTab==='owner'" (click)="rightOutboxTab='owner'" type="button">مالك المشروع</button>
            <button class="panel-tab" [class.active]="rightOutboxTab==='designer'" (click)="rightOutboxTab='designer'" type="button">مصمم المشروع</button>
          </div>

          <div class="rows">
            <div class="row" *ngFor="let item of outboxList">
              <!-- PDF (على الطرف) -->
              <button class="pdf-btn" type="button" aria-label="PDF">
                <span class="pdf">
  <svg viewBox="0 0 24 24" class="ic">
    <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
    <path d="M14 2V8H20" fill="#fff" opacity="0.5"/> </svg>
</span>
              </button>

              <!-- TEXT -->
              <div class="row-text">
                <div class="row-name">{{item.name}}</div>
                <div class="row-code">{{item.code}}</div>
              </div>

              <!-- ACTION (مكانه متبدل مع pdf) -->
              <button class="row-btn" type="button">{{item.action}}</button>
            </div>
          </div>
        </div>

        <!-- SECTION 2 -->
        <h3 class="section-title">مراجعة واعتماد التسليمات</h3>

        <div class="panel">
          <div class="panel-tabs">
            <button class="panel-tab" [class.active]="rightLettersTab==='owner'" (click)="rightLettersTab='owner'" type="button">مالك المشروع</button>
            <button class="panel-tab" [class.active]="rightLettersTab==='designer'" (click)="rightLettersTab='designer'" type="button">مصمم المشروع</button>
          </div>

          <div class="rows">
            <div class="row" *ngFor="let item of lettersList">
              <button class="pdf-btn" type="button" aria-label="PDF">
                <span class="pdf">
  <svg viewBox="0 0 24 24" class="ic">
    <path d="M14 2H6C4.9 2 4 2.9 4 4V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V8L14 2Z" fill="currentColor"/>
    <path d="M14 2V8H20" fill="#fff" opacity="0.5"/> </svg>
</span>
              </button>

              <div class="row-text">
                <div class="row-name">{{item.name}}</div>
                <div class="row-code">{{item.code}}</div>
              </div>

              <button class="row-btn" type="button">{{item.action}}</button>
            </div>
          </div>
        </div>

      </div>
    </main>

    <!-- FOOTER -->
    <app-pass-key-footer
  keyType="general_admin"
  redirectTo="/dashboard/management-pass-key"
  [digits]="4">
</app-pass-key-footer>

</div>

  </section>
  <!-- PHONE 2 (الإدارة العامة) -->
<section class="phone phone-empty">
  <!-- <div class="side-dots left" aria-hidden="true"></div>
  <div class="side-dots right" aria-hidden="true"></div> -->
  <div class="white-shell1">
   <main class="empty-screen">
    <div class="empty-title">الإدارة العامة</div>
  </main>

  <app-pass-key-footer
  keyType="admin_technical_portal"
  redirectTo="/dashboard/project-data"
  [digits]="4">
</app-pass-key-footer>
  </div>

</section>

<!-- PHONE 3 (الإدارة العامة) -->
<section class="phone phone-empty">
  <!-- <div class="side-dots left" aria-hidden="true"></div>
  <div class="side-dots right" aria-hidden="true"></div> -->
  <div class="white-shell1">
     <main class="empty-screen">
    <!-- <div class="empty-title">الإدارة العامة</div> -->
  </main>
 <!-- <footer class="footer">
    <button class="footer-btn" type="button" aria-label="تحديث">
      <svg class="ic sm" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M20 12a8 8 0 1 1-2.3-5.7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M20 4v6h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <div class="footer-keys" aria-label="مفاتيح">
      <input
        *ngFor="let _ of passKeys; let i = index"
        class="key-input"
        type="password"
        inputmode="numeric"
        maxlength="1"
        autocomplete="one-time-code"
        (input)="onKeyInput($event, i)"
        (keydown)="onKeyDown($event, i)"
      />
    </div>

    <button class="footer-btn" type="button" aria-label="قفل">
      <svg class="ic sm" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M7 11V8a5 5 0 0 1 10 0v3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <path d="M6 11h12v10H6Z" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      </svg>
    </button>
  </footer> -->
  </div>



</section>
<!-- PHONE 4 (شؤون العاملين والمالية) -->
<!-- PHONE 4 (شؤون العاملين والمالية) -->
<section class="phone phone-finance">
  <!-- dots right -->
  <!-- <div class="side-dots right" aria-hidden="true"></div> -->

  <!-- ✅ الهيدر زي ما هو (بدون أي تعديل) -->
  <header class="finance-topbar">
    <div class="finance-bar">
      <!-- الرسائل -->
      <div class="h-item" aria-label="الرسائل">
        <svg class="h-ic" viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M4 5h16a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9l-5 4v-4H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2Z"
            fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"
          />
        </svg>
        <span class="h-badge">1</span>
      </div>

      <!-- الإشعارات -->
      <div class="h-item" aria-label="الإشعارات">
        <svg class="h-ic" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 22a2 2 0 0 0 2-2H10a2 2 0 0 0 2 2Z" fill="currentColor"/>
          <path
            d="M18 16H6c1-1 2-2.5 2-4.5V9a4 4 0 1 1 8 0v2.5c0 2 1 3.5 2 4.5Z"
            fill="none" stroke="currentColor" stroke-width="2"
          />
        </svg>
        <span class="h-badge">1</span>
      </div>

      <!-- المستخدم -->
      <button class="h-user" type="button" aria-label="المستخدم">
        <span class="h-text">موظف 1</span>

        <span class="user-avatar" aria-hidden="true">
          <svg class="ua-ic" viewBox="0 0 24 24">
            <path
              d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z"
              fill="none" stroke="currentColor" stroke-width="2"
            />
            <path
              d="M4 21a8 8 0 0 1 16 0"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            />
          </svg>
        </span>

        <svg class="h-ic sm chev" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>

      <!-- التاريخ (بدون خلفية) -->
      <div class="h-item h-date" aria-label="التاريخ">
        <span class="h-text">22 نوفمبر 2025</span>
        <svg class="h-ic" viewBox="0 0 24 24" aria-hidden="true">
          <rect x="3" y="5" width="18" height="16" rx="2"
                fill="none" stroke="currentColor" stroke-width="2"/>
          <path d="M8 3v4M16 3v4M3 9h18"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>

      <!-- الوقت (الخلفية البيضاء فقط هنا) -->
      <div class="h-item time-chip" aria-label="الوقت">
        <span class="h-text">07:40</span>
        <svg class="h-ic" viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="12" r="9"
                  fill="none" stroke="currentColor" stroke-width="2"/>
          <path d="M12 7v6l3 2"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </div>
    </div>
  </header>
<div class="white-shell">
<main class="finance-body no-scrollbar">
    <h1 class="f-title">شؤون العاملين والمالية</h1>

    <h2 class="f-sec-title">صندوق الوارد</h2>
    <div class="f-card f-inbox">
      <div class="f-timeline" aria-hidden="true"></div>

      <div class="f-inbox-row" *ngFor="let it of inbox; let last = last">
        <div class="f-arrow" [class.in]="it.direction==='in'" [class.out]="it.direction==='out'">
          <svg viewBox="0 0 24 24" class="ic" aria-hidden="true">
            <path d="M7 17L17 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M9 7h8v8" fill="none" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
          </svg>
        </div>

        <div class="f-inbox-content">
          <div class="f-inbox-top">
            <div class="f-inbox-title">{{it.title}}</div>
            <div class="f-money">
              <span class="cur">{{it.currency}}</span>
              <span class="amt">{{it.amount}}</span>
            </div>
          </div>

          <div class="f-meta">{{it.codeLine}}</div>
        </div>

        <div class="f-divider" *ngIf="!last"></div>
      </div>
    </div>

    <h2 class="f-sec-title">الدفعات المستحقة</h2>
    <div class="f-card f-due">
      <div class="f-due-row" *ngFor="let p of duePayments; let last = last">
        <div class="f-badge">{{p.badge}}</div>

        <div class="f-due-mid">
          <div class="f-due-title">{{p.title}}</div>
          <div class="f-meta">{{p.code}}</div>
        </div>

       <div class="f-actions">
  <button class="btn pay" type="button" (click)="openPayModal(p)">دفع</button>
  <button class="btn reject" type="button">رفض</button>
</div>

        <div class="f-divider" *ngIf="!last"></div>
      </div>
    </div>

    <h2 class="f-sec-title">الإنذارات والمكافآت</h2>
    <div class="f-card f-alerts">
      <div class="f-alert-row" *ngFor="let a of alertsRewards; let last = last">
        <div class="f-alert-ic" [class.down]="a.thumb==='down'" [class.up]="a.thumb==='up'">
          <svg viewBox="0 0 24 24" class="ic" aria-hidden="true">
            <path d="M7 12V5a2 2 0 0 1 2-2h2v9" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <path d="M11 12a2 2 0 0 0 2 2h3a2 2 0 0 1 2 2v3" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>

        <div class="f-alert-text">{{a.text}}</div>
        <button class="btn send" type="button">إرسال</button>

        <div class="f-divider" *ngIf="!last"></div>
      </div>
    </div>
  </main>

  <!-- ✅ FOOTER -->
    <app-pass-key-footer
  keyType="financial_control"
  redirectTo="/dashboard/pass-key"
  [digits]="4">
</app-pass-key-footer>
</div>
  <!-- ✅ BODY (مفيش تكرار section هنا) -->

  <!-- PAY MODAL -->
<div class="modal-backdrop" *ngIf="isPayModalOpen" (click)="closePayModal()">
  <div class="modal-card" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
    <div class="modal-head">
      <button class="modal-close" type="button" aria-label="إغلاق" (click)="closePayModal()">×</button>
      <div class="modal-title">سداد الدفعة المستحقة</div>
    </div>

    <div class="modal-body">
      <!-- الصف الأول: 3 أعمدة -->
      <div class="modal-grid-3">
        <div class="m-block">
          <div class="m-h">
            <span class="m-dot"></span>
            بيانات المشروع
          </div>
          <div class="m-row">
            <div class="m-k">الإسم</div>
            <div class="m-v">{{payModalData.projectName}}</div>
          </div>
          <div class="m-row">
            <div class="m-k">الكود</div>
            <div class="m-v">{{payModalData.projectCode}}</div>
          </div>
          <div class="m-row">
            <div class="m-k">الإشتراك</div>
            <div class="m-v">{{payModalData.subscription}}</div>
          </div>
        </div>

        <div class="m-block">
          <div class="m-h">
            <span class="m-dot"></span>
            بيانات المصمم
          </div>
          <div class="m-row">
            <div class="m-k">الإسم</div>
            <div class="m-v">{{payModalData.designerName}}</div>
          </div>
          <div class="m-row">
            <div class="m-k">الكود</div>
            <div class="m-v">{{payModalData.designerCode}}</div>
          </div>
        </div>

        <div class="m-block">
          <div class="m-h">
            <span class="m-dot"></span>
            بيانات الدفعة
          </div>
          <div class="m-row">
            <div class="m-k">الدفعة</div>
            <div class="m-v">{{payModalData.percent}}%</div>
          </div>
          <div class="m-row">
            <div class="m-k">المبلغ</div>
            <div class="m-v">{{payModalData.amount}} {{payModalData.currency}}</div>
          </div>
        </div>
      </div>

      <!-- الصف الثاني: بيانات الحساب البنكي -->
      <div class="m-block m-bank">
        <div class="m-h">
          <span class="m-dot"></span>
          بيانات الحساب البنكي
        </div>

        <div class="modal-grid-2">
          <div>
            <div class="m-row">
              <div class="m-k">إسم البنك</div>
              <div class="m-v">{{payModalData.bankName}}</div>
            </div>
            <div class="m-row">
              <div class="m-k">رقم IBAN</div>
              <div class="m-v">{{payModalData.iban}}</div>
            </div>
          </div>

          <div>
            <div class="m-row">
              <div class="m-k">رقم الحساب</div>
              <div class="m-v">{{payModalData.accountNumber}}</div>
            </div>
            <div class="m-row">
              <div class="m-k">رقم SWIFT</div>
              <div class="m-v">{{payModalData.swift}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-actions">
      <button class="m-btn pay" type="button" (click)="confirmPay()">دفع</button>
      <button class="m-btn reject" type="button" (click)="closePayModal()">رفض</button>
    </div>
  </div>
</div>

</section>


</div>
